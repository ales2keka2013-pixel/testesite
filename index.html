<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Achadinhos Vips | Feed de V√≠deos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body, html { height: 100%; overflow: hidden; background-color: #000; font-family: 'Segoe UI', sans-serif; color: white; }
        .app-container { height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory; }
        .video-card { height: 100vh; width: 100%; scroll-snap-align: start; position: relative; background-color: #000; display: flex; align-items: center; justify-content: center; }
        video { width: 100%; height: 100%; object-fit: cover; }
        .side-bar { position: absolute; right: 15px; bottom: 160px; display: flex; flex-direction: column; gap: 20px; z-index: 15; }
        .action-btn { display: flex; flex-direction: column; align-items: center; font-size: 12px; text-shadow: 1px 1px 3px rgba(0,0,0,0.8); }
        .action-btn i { font-size: 30px; margin-bottom: 5px; cursor: pointer; }
        .action-btn i.liked { color: #FE2C55; }
        .overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px; background: linear-gradient(transparent, rgba(0,0,0,0.9)); z-index: 10; }
        .btn-shop { display: block; background: #FE2C55; color: white; text-align: center; padding: 15px; border-radius: 30px; text-decoration: none; font-weight: bold; width: 85%; margin: 10px auto 80px; }
        .loading { display: flex; justify-content: center; align-items: center; height: 100vh; }
    </style>
</head>
<body>

    <div id="loading" class="loading">Carregando seus v√≠deos...</div>
    <div class="app-container" id="appContainer" style="display: none;"></div>

    <script>
        // ID extra√≠do da sua folha de c√°lculo "teste"
        const SHEET_ID = '1817zpM3JYfKchLtHPOauozCcsVhDieTSs3QG5-5ZAVU';
        const SHEET_NAME = 'P√°gina1'; 
        const API_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${SHEET_NAME}`;

        async function carregarVideos() {
            try {
                const response = await fetch(API_URL);
                const text = await response.text();
                const data = JSON.parse(text.substr(47).slice(0, -2));
                const rows = data.table.rows;
                const container = document.getElementById('appContainer');
                
                rows.forEach((row) => {
                    const video_url = row.c[0] ? row.c[0].v : '';
                    const affiliate_url = row.c[1] ? row.c[1].v : '#';
                    const username = row.c[2] ? row.c[2].v : 'achadinhos';
                    const description = row.c[3] ? row.c[3].v : '';

                    if (!video_url) return;

                    const section = document.createElement('section');
                    section.className = 'video-card';
                    section.innerHTML = `
                        <video loop playsinline src="${video_url}" onclick="togglePlay(this)"></video>
                        <div class="side-bar">
                            <div class="action-btn" onclick="this.querySelector('i').classList.toggle('liked')">
                                <i class="fas fa-heart"></i>
                                <span>Amei</span>
                            </div>
                        </div>
                        <div class="overlay">
                            <div style="font-weight:bold; margin-bottom:5px;">@${username}</div>
                            <div style="font-size:14px; margin-bottom:15px;">${description}</div>
                            <a href="${affiliate_url}" target="_blank" class="btn-shop">üõçÔ∏è Ir para a Loja</a>
                        </div>
                    `;
                    container.appendChild(section);
                });

                document.getElementById('loading').style.display = 'none';
                container.style.display = 'block';
                const vids = document.querySelectorAll('video');
                if(vids[0]) vids[0].play();

            } catch (error) {
                document.getElementById('loading').innerText = "Erro ao carregar dados. Verifique se a folha de c√°lculo est√° p√∫blica.";
            }
        }

        function togglePlay(vid) { vid.paused ? vid.play() : vid.pause(); }

        document.getElementById('appContainer').addEventListener('scroll', () => {
            const videos = document.querySelectorAll('video');
            videos.forEach(v => {
                const rect = v.getBoundingClientRect();
                if (rect.top >= 0 && rect.top < window.innerHeight / 2) { v.play(); } else { v.pause(); }
            });
        });

        carregarVideos();
    </script>
</body>
</html>
